!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.sortedJSONStringify=t()}(this,function(){"use strict";function n(n){var t=n.replace(/,$/,""),r=t.replace(/^ */,"");return[t.length-r.length,r]}function t(n){var t=n.map(function(n,t){return[t,(r=n[0][1],e=/^"(?:[^"\\]|\\.)*"/.exec(r)[0],JSON.parse(e))];var r,e});return t.sort(function(n,t){return n[1]===t[1]?0:n[1]<t[1]?-1:1}),t.map(function(t){return n[t[0]]})}var r=function(n,t){if(t=Math.floor(t),n=String(n),!(t>0)||""===n)return"";for(var r="",e=0;e<t;++e)r+=n;return r},e=function(n){return"number"==typeof n?r(" ",Math.min(n,10)):"string"==typeof n?n.substring(0,10):""},u=function(n){return n.replace(/^("(?:[^"\\]|\\.)*":) /,"$1")};return function(i,o,f){var a=e(f),c=JSON.stringify(i,o,1).split("\n").map(n);return function(n){for(var r=0;r<n.length;++r)if(/\{$/.test(n[r][1])){for(var e=n[r][0],u=[],i=r+1;n[i][0]!==e;++i){var o=[n[i]];if(/[[{]$/.test(n[i][1])){for(++i;o.push(n[i]),n[i][0]!==e+1;++i);u.push(o)}else u.push(o)}if(!(u.length<=1)){var f=[].concat.apply([],t(u));[].splice.apply(n,[r+1,i-r-1].concat(f))}}}(c),function(n,t){return n.map(function(e,i){var o=e[1]+(0===e[0]||n[i+1][0]!==e[0]?"":",");return t?r(t,e[0])+o:u(o)}).join(t?"\n":"")}(c,a)}});
